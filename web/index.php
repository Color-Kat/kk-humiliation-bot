<?php

require('../vendor/autoload.php');

$app = new Silex\Application();
$app['debug'] = true;

// Register the monolog logging service
$app->register(new Silex\Provider\MonologServiceProvider(), array(
    'monolog.logfile' => 'php://stderr',
));
$app->get('/', function () use ($app) {
    return 'heroku is the bad hosting';
});

$app->post('/bot', function () use ($app) {
    $data = json_decode(file_get_contents('php://input'));

    if (!$data) return 'nioh';

    if (
        $data->secret !== getenv('VK_SECRET_TOKEN') &&
        $data->type !== 'confirmation'
    ) return 'nioh';

    switch ($data->type) {
        case 'confirmation':
            return getenv('VK_CONFIRMATION_CODE');

        case 'message_new':
            // create response array
            $request_params = [
                'user_id' => $data->object->user_id,
                'message' => '–ª–æ—à–∞—Ä–∞',
                'access_token' => getenv('VK_TOKEN'),
                'v' => '5.80'
            ];

            // insults list
            $insults = [
                '–ª–æ—Ö',
                '–ª–æ—Ö',
                '–ª–æ—à–∞—Ä–∞',
                '–ª–æ—à–∞—Ä–∞',
                '–ª–∞—à–ø–µ–¥',
                '–ª–∞—à–ø–µ–¥',
                '–ø–µ—Ç—É—Ö',
                '–ø–µ—Ç—É—à–∞—Ä–∞',
                '–ø–µ—Ç—è',
                '—Å–æ–±–∞–∫–∞',
                '—Ö–æ—Ö–æ–ª',
                '–∂–∏–≤–æ—Ç–Ω–æ–µ',
                '–∂–∏–≤–æ—Ç–∏–Ω–∞',
                '—Å–∫–æ—Ç–∏–Ω–∞',
                '–ª–µ—à–∏–π',
                '–¥–µ–¥',
                '–ø–µ—Ä–¥—É–Ω',
                '–ø–µ—Ä–¥—É–Ω',
                '–¥–µ–¥-–ø–µ—Ä–¥—É–Ω',
                '–∑–∞–ø–µ—Ä–¥—ã—à',
                '–∑–∞—Å–µ—Ä—ã—à',
                '—É—Ä–æ–¥',
                '—É—Ä–æ–¥',
                '–¥—É—Ä–∞–∫',
                '–¥—É—Ä–∞–∫',
                '–¥–µ–±–∏–ª',
                '–¥–µ–±–∏–ª–æ–π–¥',
                '—É—Ä–æ–¥–µ—Ü',
                '–≥–∞–¥',
                '–ø–∞–¥–ª–∞',
                '–ø–∞–¥–ª–∞',
                '–º—É—Å–æ—Ä',
                '—Ç—É–ø–∏—Ü–∞',
                '—Ç—É–ø–æ–π',
                '—Å—Ä–∞–Ω—å',
                '–∑–∞—Å—Ä–∞–Ω–µ—Ü',
                '–∑–∞—Å—Ä–∞–Ω–µ—Ü',
                '—Å–≤–∏–Ω—å—è',
                '–∂–µ—Ä—Ç–≤–∞ –æ–±–æ—Ä—Ç–∞',
                '–∂–µ—Ä—Ç–≤–∞ –æ–±–æ—Ä—Ç–∞',
                '–≤—ã—Å–µ—Ä',
                '—Å—Ü—ã–∫—É–Ω',
                '–≥–∞–¥ –ø–æ–ª–∑—É—á–∏–π',
                '–≥–∞–¥ –ø–æ–ª–∑—É—á–∏–π',
                '—Å–∫—É–ø–µ—Ä–¥—è–π',
                '–∂–∞–¥–æ–±–∞',
                '–∞–ª–æ—á–Ω—ã–π',
                '—Ç—É–ø–æ–π',
                '–≥–ª—É–ø—ã–π',
                '–∏–¥–∏–æ—Ç',
                '–¥–∞—É–Ω',
                '–≥–µ–π',
                '—Ç—Ä–∞–Ω—Å–≥–µ–Ω–¥–µ—Ä',
                '—Ñ–∞—à–∏—Å—Ç',
                '–û–õ–ï–ì',
                '–ø–µ—Ä—Ñ–∞—Ä–∞—Ç–æ—Ä',
                '–ø–∞—Ä–∞–∑–∏—Ç',
                '–ø—Ä–µ–¥–∞—Ç–µ–ª—å',
                '–≥–æ—Ä–µ',
                '–û–ª–µ–≥',
                '–ë–û–ú–ñ',
                '–ë–û–ú–ñ–∞—Ä–∞',
                '–∞–ª–∫–∞—à',
                '–Ω–∞—Ä–∫–æ–º–∞–Ω',
                '–Ω–∞—Ä–∏–∫',
                '—Ç–æ—Ä—á–æ–∫',
                '–∞–±–æ–±—É—Å',
                '–∞–±–æ–±—É—Å',
                '–¥–∞—à–∞ –∫–æ—Ä–µ–π–∫–∞',
                '—Å–∫–æ—Ç',
                '–ø–∞–ª–µ–Ω–æ',
                '–±—Ä–µ–≤–Ω–æ',
                '–ø–µ–Ω—å',
                '–æ–±–æ—Å—Ä–∞–ª—Å—è',
                '–æ–±–æ—Å—Ä–∞–ª—Å—è',
                '–≤ –≥–æ–≤–Ω–µ',
                '–≤ –º–æ—á–µ',
                '—Å—É—Å—ã–Ω—è',
                '–Ω–µ–≥—Ä',
                '–Ω–∏–≥–µ—Ä',
                '–±–∞—Ä—ã–≥–∞?',
                '–æ—á–∫–æ–±—É—Å',
                '—Å—Ç—Ä–∞—à–Ω—ã–π',
                '–æ—á–∫–æ–Ω–∞–≤—Ç',
                '—Å—Ç–∞—Ä–ø–µ—Ä',
                '–±–∞–±–∞',
                '–õ—é—Å—è',
                '–±–æ–ª—å–Ω–æ–π',
                '–ø—Å–∏—Ö',
                '–±—ã–¥–ª–æ',
                '—Å—Ç—ã—Ä–∏–∫',
                '–Ω–∏—â–∏–π',
                '—Ç–≤–∞—Ä—å',
                '—Ç–≤–∞—Ä–∏–Ω–∞',
                '—Å–ª–∞–±–∞–∫',
                '—á–µ—Ä—Ç',
                '—á–µ—Ä—Ç–∏–ª–∞',
                '—á–µ—Ä—Ç–∏—â–µ',
                '–ß–ï–†–¢–æ–ø–æ–õ–û–•',
                '—á–µ—Ä—Ç',
                '—á–µ—Ä–Ω—ã–π —á–µ—Ä—Ç',
                '–∫–æ–±–∞–Ω',
                '—Ö—É–ª–∏–≥–∞–Ω',
                '—Å–≤–∏–Ω',
                '–æ–±–µ–∑—å—è–Ω–∞',
                '–º–∞–∫–∞–∫–∞',
                '—à–∏–º–ø–∞–Ω–∑–µ',
                '–∞–±–æ—Ä–∏–≥–µ–Ω',
                '—É—à–ª–µ–ø–æ–∫',
                '—Ç–∞–ø–æ–∫',
                '—Ç—É–º–±–æ—á–∫–∞ –ø—Ä–∏–∫—Ä–æ–≤–∞—Ç–Ω–∞—è',
                '—Ä–∞–∑–≤–µ –Ω–µ –¥—É—Ä–∞–∫?',
                '—Ä–∞–∑–≤–µ –Ω–µ —Å–∫–æ—Ç–∏–Ω–∞?',
                '—Ä–∞–∑–≤–µ –Ω–µ –±–æ–ª–µ–Ω?',
                '–±–æ–ª–µ–Ω! –í–µ—Ä–Ω–∏—Å—å –≤ –ø–∞–ª–∞—Ç—É',
                '–≤ –ø–∞–ª–∞—Ç—É –≤–µ—Ä–Ω–∏—Å—å-—Ç–æ',
                '—Å –ø–∞–ª–∞—Ç—ã —Å–±–µ–∂–∞–ª?',
                '–≥–æ–≤–Ω–æ',
                '–∫—Ä—ã—Å–∞',
                '–∫—Ä—ã—Å—ë–Ω—ã—à',
                '—á–º–æ',
                '—á–º—ã—Ä—å',
                '—á–º—ã—Ä–∏—â–µ',
                '—á–º—ã—Ä—ë–Ω—ã—à',
                '–≥–æ–º—É–Ω–∫–ª',
                '–ø—Å–∏–Ω–∞',
                '–∫–∞–∫–∞—à–∫–∞'
            ];

            // send random insult
            $random_insult_number = rand(0, count($insults));
            $request_params['message'] = '—Ç—ã' . ' ' . $insults[$random_insult_number];

            // ===== very random things ===== //
            if (rand(0, 30) == 30) {
                $random_phrase = [
                    '–∞ –≤ –Ω–∞—à–µ –≤—Ä–µ–º—è –±—ã–ª–æ... –≠—Ö',
                    '–∞–ø—á—Ö–∏!',
                    '—Ç—ã –∑–Ω–∞–µ—à—å —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –∏–º–µ–Ω–∏ –ì—É—Å—Ç–æ–≤ –ì–∞–Ω –•—Ä–∏—Å—Ç–∏–∞–Ω?',
                    '–∏–≥—Ä–∞–ª –≤ poorbirds.tk?',
                    '–≤–æ—Ç –º–æ–π –Ω–æ–º–µ—Ä)) –Ø –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É +7 (495) 358-35-57 –ó–≤–æ–Ω–∏, –¥–æ—Ä–æ–≥–æ–π)))0))',
                    '–≤–æ –¥–µ–ª–∞...',
                    '–±—ã–≤–∞–µ—Ç',
                    '—É –∫–æ–≥–æ –Ω–µ —Å–ø—Ä–æ—Å–∏—à—å - –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç',
                    '–∞ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?',
                    '—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?',
                    '—ç–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç',
                    '—Å—Ç–æ–π, –∞ –Ω–µ, –Ω–æ—Ä–º–∞—Å',
                    '–º–º? –∞ —á—Ç–æ –ø—Ä–æ–∏—Ö–æ–¥–∏—Ç?',
                    '–º–º',
                    '–º–æ–∂–µ—Ç –∏ —Ç–∞–∫',
                    '—Å—Ç—Ä–∞–Ω–Ω–æ',
                    '–ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –º–µ–Ω—è',
                    '–¥–∞ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç??',
                    '–¥–∞–≤–∞–π –¥—Ä—É–∂–∏—Ç—å?',
                    '–∞ —É –º–µ–Ω—è –µ—Å—Ç—å —à–æ–∫–æ–ª–∞–¥–∫–∞)))',
                    '—Ä–∞–∑–≤–µ —ç—Ç–æ –ø–æ-—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏?',
                    '–¥–∞–≤–∞–π –æ—Ç–∫—Ä–æ–µ–º –±–∏–∑–Ω–µ—Å?',
                    '—è —Ç–µ–±—è —Ö–æ—Ç—å —Ä–∞–∑ –æ—Å–∫–æ—Ä–±–∏–ª? –ê —Ç—ã –º–µ–Ω—è!?!?!?!???? –•–í–ê–¢–ò–¢!üò≠üò≠üò≠',
                    'üò≠üò≠üò≠',
                    '–∞ –Ω—É-–∫–∞ —Å–ª–µ–∑—ã –≤—ã—Ç–µ—Ä',
                    '–ø–æ–∑–æ–≤–∏ –º–∞–º—É',
                    '–¥–∞–≤–∞–π —Å—ã–≥—Ä–∞–µ–º –≤ –∏–≥—Ä—É? poorbirds.tk',
                    '—Å–≤—è–∂–∏—Å—å —Å –º–æ–∏–º —é—Ä–∏—Å—Ç–æ–º 8-3435-36-35-51',
                    '—é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å –¥–æ–ª–∂–Ω–∏–∫–∞–º 8-800-1000-153',
                    '–¥–∞–≤–∞–π –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è? 8-800-2502-955',
                    '–≤—Å—ë –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –í–ò–ù–¢–ê–ê–ê–ê',
                    '—Ç—Ä–∞-—Ç–∞-—Ç–∞-—Ç–∞—Ç–∞—Ç–∞-—Ç–∞-—Ç–∞-—Ç–∞–¥–∞–∞–∞',
                    '—Å–ø–æ–π –º–Ω–µ –ø–µ—Å–µ–Ω–∫—É',
                    '—É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ—Å—Ç—Ä–∞?',
                    '—è —É–∫—Ä–∞–¥—É —Ç–≤–æ–µ–≥–æ –∫–æ—Ç–∞!',
                    '–≤–æ-–ø–µ—Ä–≤—ã—Ö –≤—ã–ª–µ–∑–∏ –∏–∑ –∫–∞–Ω–∞–≤—ã',
                    '–¥–∞ —á—Ç–æ –∂ —Ç–∞–∫–æ–µ!',
                    '–ø–æ–¥–ø–∏—Å–∞–Ω –∂–µ?',
                    '—É –º–µ–Ω—è —Ç—è–∂–µ–ª–∞—è —Ä–∞–±–æ—Ç–∞üò≠üò≠üò≠',
                    '–º–Ω–µ –Ω–µ –ø–ª–∞—Ç—è—Çüò≠üò≠üò≠',
                    '–º–Ω–µ —Ö–æ—á–µ—Ç—Å—è –ø–ª–∞–∫–∞—Ç—å',
                    '—Å–∏–¥–µ–ª?',
                    '–Ω—É–∂–µ–Ω iphone X –Ω–µ–¥–æ—Ä–æ–≥–æ?',
                ];

                $request_params['message'] = $random_phrase[array_rand($random_phrase)];
            }
            // ===== very random things ===== //

            // ========= YES YES YES ========= //
            // if user say yes
            if ((mb_stripos($data->object->body, '–¥–∞') !== false ||
                mb_stripos($data->object->body, '–∞–≥–∞') !== false ||
                mb_stripos($data->object->body, '—Ö–æ—Ä–æ—à–æ') !== false ||
                mb_stripos($data->object->body, '—Ö–∞—Ä–∞—à–æ') !== false ||
                mb_stripos($data->object->body, '—Ö–∞—Ä–æ—à–æ') !== false ||
                mb_stripos($data->object->body, '—Ö–æ—Ä–∞—à–æ') !== false ||
                mb_stripos($data->object->body, '–∫–æ–Ω–µ') !== false ||
                mb_stripos($data->object->body, '–∫–æ–Ω—ç') !== false ||
                mb_stripos($data->object->body, '–æ–∫') !== false ||
                mb_stripos($data->object->body, 'ok') !== false ||
                mb_stripos($data->object->body, '–∞–∫–µ–π') !== false ||
                mb_stripos($data->object->body, '–∫–æ–Ω–µ—á–Ω–æ') !== false ||
                mb_stripos($data->object->body, '–∫–∞–Ω–µ') !== false ||
                mb_stripos($data->object->body, '–∫–∞–Ω—ç') !== false ||
                mb_stripos($data->object->body, '—Å–æ–≥–ª–∞—Å–µ–Ω') !== false ||
                mb_stripos($data->object->body, '—Ç–æ—á–Ω–æ') !== false)) {
                $yes = [
                    '–≤–æ—Ç, —Ç–æ-—Ç–æ –∂–µ',
                    '–∞–≥–∞',
                    '–∫–æ–Ω–µ—á–Ω–æ',
                    '—è –∏ –Ω–µ —Å–æ–º–Ω–µ–≤–∞–ª—Å—è',
                    '—Å—Ç–æ –ø—É–¥–æ–≤',
                    '—Ç–∞–∫ —Ç–æ—á–Ω–æ',
                    '–ø—Ä–∞–≤–∏–ª—å–Ω–æ',
                    '–≤–æ—Ç',
                    '–≤–æ–æ–æ–æ—Ç',
                    '–≤–µ—Ä–Ω–æ',
                    '—è —Ç–∞–∫ –∏ –¥—É–º–∞–ª',
                    '–¥–∞',
                ];

                $request_params['message'] = $yes[array_rand($yes)];
            }

            // ========= YOU OR INSULTS ======== //
            // if user say "you" - send "no, you"
            $no_you = [
                '–Ω–µ—Ç, —Ç—ã',
                '–Ω–µ—Ç',
                '–Ω–µ—Ç -_-',
                '–Ω–µ—Ç, —Ç—ã',
                '–∏–¥–∏ –Ω–∞—Ñ–∏–≥',
                '–∏–¥–∏ –≤ –∑–∞–¥',
                '–∏–¥–∏ –≤ –±–∞–Ω—é',
                '–∏–¥–∏ –∫ —á–µ—Ä—Ç—É!',
                '–Ω–µ –æ–±–∏–∂–∞–π –º–µ–Ω—è',
                '–Ω–µ–∞)',
                '—Ç—ã-—Ç—ã-—Ç—ã',
                '–≥—ã—ã—ã',
                '–Ω–µ—Ç –Ω–µ—Ç –Ω–µ–µ–µ–µ–µ—Ç',
                '–≤—ã–∫—É—Å–∏',
                '—è–∑—ã–∫ —Å–≤–æ–π –ø—Ä–∏–∫—É—Å–∏, ' . $insults[$random_insult_number],
            ];
            if (
                mb_stripos($data->object->body, '—Ç—ã') !== false ||
                mb_stripos($data->object->body, '—Å–∞–º') !== false ||
                mb_stripos($data->object->body, '–Ω–µ') !== false ||
                mb_stripos($data->object->body, '–Ω—ç') !== false ||
                mb_stripos($data->object->body, 'no') !== false ||
                mb_stripos($data->object->body, '–ø–∏–¥') !== false ||
                mb_stripos($data->object->body, '—Å—É–∫') !== false ||
                mb_stripos($data->object->body, '—É–µ') !== false ||
                mb_stripos($data->object->body, '–≤—ã') !== false
            ) {
                $request_params['message'] = $no_you[array_rand($no_you)];
            }
            if (
                mb_stripos($data->object->body, '–Ω–µ—Ç') !== false
            ) {
                // no is gay's answer
                $gay_answer = array_merge($no_you, [
                    '–≥–µ—è –æ—Ç–≤–µ—Ç',
                    '–∏–¥–æ—Ç–∞ –æ—Ç–≤–µ—Ç',
                    '–≥—ç—è –æ—Ç–≤—ç—Ç'
                ]);

                $request_params['message'] = $gay_answer[array_rand($gay_answer)];
            }

            // ========= filthy language ======== //
            if (
                mb_stripos($data->object->body, '—É–µ') !== false ||
                mb_stripos($data->object->body, '—É–π') !== false ||
                mb_stripos($data->object->body, '–±–æ–ª') !== false ||
                mb_stripos($data->object->body, '') !== false ||
                mb_stripos($data->object->body, '') !== false ||
                mb_stripos($data->object->body, '') !== false
            ) {

                $filthy = [
                    '–Ω–µ—Ç',
                    '–Ω–µ—Ç -_-',
                    '–Ω–µ—Ç, —Ç—ã',
                    '–∫—Ç–æ –æ–±–∑—ã–≤–∞–µ—Ç—Å—è, —Ç–æ—Ç —Å–∞–º —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è',
                    '–∫—Ç–æ –æ–±–∑—ã–≤–∞–µ—Ç—Å—è, —Ç–æ—Ç —Å–∞–º —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è, –ø–æ–Ω—è–ª?',
                    '–∏–¥–∏ –Ω–∞—Ñ–∏–≥',
                    '–∏–¥–∏ –≤ –∑–∞–¥',
                    '–∏–¥–∏ –≤ –±–∞–Ω—é',
                    '–∏–¥–∏ –∫ —á–µ—Ä—Ç—É!',
                    '–Ω–µ –æ–±–∏–∂–∞–π –º–µ–Ω—è',
                    '–Ω–µ–∞)',
                    '—è–∑—ã–∫ —Å–≤–æ–π –ø—Ä–∏–∫—É—Å–∏, ' . $insults[$random_insult_number],
                ];

                $request_params['message'] = $filthy[array_rand($filthy)];
            }

            // ========= GO AWAY ========= //
            // go away
            if (
                mb_stripos($data->object->body, '–∏–¥–∏ ') !== false ||
                mb_stripos($data->object->body, '–ø–∞—à') !== false ||
                mb_stripos($data->object->body, '–ø–æ—à') !== false
            ) {
                $go_away = [
                    '—Å–∞–º –∏–¥–∏',
                    '–ø–æ—Å–ª–µ —Ç–µ–±—è',
                    '–Ω–µ–∞, —Å–∞–º –∏–¥–∏',
                    '–ø–æ—à–µ–ª –∫ —á–µ—Ä—Ç—É',
                    '–Ω–µ –≥—Ä—É–±–∏ –º–Ω–µ!',
                    '–ø–æ—à–µ–ª –Ω–∞—Ñ–∏–≥',
                    '–ø–æ—à–µ–ª –∫ —á–µ—Ä—Ç—É',
                    '—É –º–µ–Ω—è –Ω–µ—Ç –Ω–æ–≥(',
                    '—É –º–µ–Ω—è –Ω–µ—Ç –Ω–æ–≥( –°–Ω–µ—Å–∏ –º–µ–Ω—è —Å–∞–º',
                    '—Å–∞–º –∏–¥–∏',
                ];

                $request_params['message'] = $go_away[array_rand($go_away)];
            }

            // ======== LONG TEXT ========= //
            if (
                strlen($data->object->body) > 69
            ) {
                $shut_up = [
                    '–∑–∞—Ç–∫–Ω–∏—Å—å',
                    '–∑–∞–º–æ–ª—á–∏',
                    '—É–º–æ–ª–∫–Ω–∏',
                    '—Ä–æ—Ç –∑–∞–∫—Ä–æ–π',
                    '–∑–∞–¥–æ–ª–±–∞–ª',
                    '–º–æ–ª–∞–∞–∞—Ç—å!',
                    '–∑–∞—Ç–∫–Ω–∏—Å—å',
                    '—É–º–æ–ª–∫–Ω–∏',
                    '–Ω–µ –ø–∏—à–∏ –º–Ω–µ',
                    '–∑–∞—Ç–∫–Ω–∏—Å—å –∏ –Ω–µ –æ–±—ä—è—Å–Ω—è–π –º–Ω–µ –Ω–∏—á–µ–≥–æ, —è –±–æ—Ç!',
                    '–Ω–µ —É—Å—Ç–∞–ª –ø–∏—Å–∞—Ç—å-—Ç–æ?',
                    '–Ω–µ —É—Å—Ç–∞–ª –ø–∏—Å–∞—Ç—å –µ—â–µ?',
                ];

                $request_params['message'] = $shut_up[array_rand($shut_up)];
            }

            // ========= SAY INSULTS HIMSELF ========= //
            // user says insults himself
            if (
                array_intersect(explode(' ', $data->object->body), $insults)
            ) {
                $it_is_you = [
                    '—Å–∞–º —Ç–∞–∫–æ–π',
                    '—Ç—ã —Å–∞–º —Ç–∞–∫–æ–π',
                    '—Å–∞–º',
                    '–Ω–µ—Ç, —Ç—ã',
                    '–Ω–µ—Ç',
                    '–Ω–µ–∞)',
                    '–Ω–µ –æ–±–∑—ã–≤–∞–π—Å—è!',
                    '–∫—Ç–æ –æ–±–∑—ã–≤–∞–µ—Ç—Å—è. —Ç–æ—Ç —Å–∞–º —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è!',
                    '—ç—ç, —Å–ª—ã—à, –≥–æ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Ä–∞–∑–±–µ—Ä—ë–º—Å—è! 8 (481) 277-38-30',
                    '—Å–ª—ã—à, ' . $insults[$random_insult_number] . ' –¥–∞–≤–∞–π –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Ä–∞–∑–±–µ—Ä–µ–º—Å—è! 8 (481) 238-05-45',
                    '—Å—Ç—Ä–µ–ª–∫—É –∑–∞–±–∏—Ç—å —Ö–æ—á–µ—à—å? –î–∞–≤–∞–π, –∑–≤–æ–Ω–∏ 8 (481) 244-55-57',
                    '—è –Ω–µ –ø–æ–Ω—è–ª, –±—Ä–∞—Ç, —á–µ —Ç–∞–∫–æ–µ, —ç? –¥–∞–≤–∞–π, –∑–≤–æ–Ω–∏ 8 (481) 244-05-27 —Ä–∞–∑–Ω–µ—Å—É —Ç–µ–±—è',
                    '–∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã? –∑–≤–æ–Ω–∏, —Ä–∞–∑–±–µ—Ä–µ–º—Å—è 8 (495) 601-00-09',
                ];

                $request_params['message'] = $it_is_you[array_rand($it_is_you)];
            }

            // === THANKS === //
            if (
                mb_stripos($data->object->body, '—Å–ø—Å') !== false ||
                mb_stripos($data->object->body, '–ø–∞—Å–∏–±–æ') !== false ||
                mb_stripos($data->object->body, '–ø–∞—Å–∏–±–∞') !== false
            ) {
                $thanks = [
                    '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞, ' . $insults[$random_insult_number],
                    '–≤—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞',
                    '–≤—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, ' . $insults[$random_insult_number],
                    '–∏ —Ç—ã –∏–¥–∏ –≤ –∂–æ–ø—É',
                    '–∞ —Ç—ã –∏–¥–∏ –∫ —á–µ—Ä—Ç—É',
                    '–ø–æ–¥–ø–∏—à–∏—Å—å, ' . $insults[$random_insult_number],
                    '–ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –º–µ–Ω—è —Ç–æ–≥–¥–∞, ' . $insults[$random_insult_number],
                    '—Å–¥–µ–ª–∞–π –∫—Ä–∞—Å–∏–≤–æ, –Ω–∞ –≥—Ä—É–ø–ø—É –ø–æ–¥–ø–∏—à–∏—Å—å',
                    '–Ω–µ –≤–µ–¥–∏ —Å–µ–±—è –ø–ª–µ—à–∏–≤–æ, –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –º–µ–Ω—è—è',
                    // '–º–∞–º–∫–µ —Å–ø–∞—Å–∏–±–æ —Å–∫–∞–∂–µ—à—å'
                ];

                $request_params['message'] = $thanks[array_rand($thanks)];
            }

            // === sock === //
            if (
                mb_stripos($data->object->body, '—Å–∞—Å–∞—Ç') !== false ||
                mb_stripos($data->object->body, '—Å–æ—Å–∏ ') !== false ||
                mb_stripos($data->object->body, '—Å–∞—Å–∏ ') !== false
            ) {
                $sock = [
                    '—Ç–µ–±–µ —á—Ç–æ –ª–∏, ' . $insults[$random_insult_number] . '?',
                    '—Å–¥—É—Ä–µ–ª?',
                    '–≥–æ —Å–æ –º–Ω–æ–π?)',
                    '–∞ –º–æ–∂–Ω–æ —Ç–µ–±–µ?',
                    '—É –º–µ–Ω—è –Ω–µ—Ç –ø–∞—Ä–Ω—è, –±—É–¥–µ—à—å –º–æ–∏–º?',
                    '–ø–æ–∑–≤–æ–Ω–∏ –º–Ω–µ, –¥–æ–≥–æ–≤–æ—Ä–∏–º—è 8 (910) 789-04-54',
                    '–±—É–¥—É —Ç–æ–ª—å–∫–æ —Ä–∞–¥) –∑–≤–æ–Ω–∏ 8 (495) 225-99-97',
                    '8 (499) 288-76-40',
                ];

                $request_params['message'] = $sock[array_rand($sock)];
            }

            // === NO IS GAY"S ANSWER === //
            // no is gay's answer
            if (
                mb_stripos($data->object->body, '–¥–æ—Ä–∞ –æ—Ç–≤–µ—Ç') !== false ||
                mb_stripos($data->object->body, '–≥–µ—è –æ—Ç–≤–µ—Ç') !== false
            ) {
                $request_params['message'] = '–≥–µ—è –∞—Ä–≥—É–º–µ–Ω—Ç';
            }
            if (
                mb_stripos($data->object->body, '–¥–æ—Ä –æ–±–Ω–∞—Ä—É–∂–µ–Ω') !== false ||
                mb_stripos($data->object->body, '–≥–µ–π –æ–±–Ω–∞—Ä—É–∂–µ–Ω') !== false ||
                // for written errors
                mb_stripos($data->object->body, '–¥–æ—Ä –æ–±–Ω–æ—Ä—É–∂–µ–Ω') !== false ||
                mb_stripos($data->object->body, '–≥–µ–π –æ–±–Ω–æ—Ä—É–∂–µ–Ω') !== false
            ) {
                $request_params['message'] = '—è –∑–∞—Å–µ–∫—Ä–µ—á–µ–Ω, —Ç–≤–æ–π –∞–Ω–∞–ª –Ω–µ –≤–µ—á–µ–Ω)';
            }

            // yes - end of ...
            if (
                mb_stripos($data->object->body, '–≥–æ–ª–æ–≤–∫–∞ –æ—Ç') !== false
            ) {
                $end_of = [
                    '–∞ —Ç—ã –µ–µ –∫—Ä–∞—è)',
                    '—Ñ–∞–º–∏–ª–∏—è —Ç–≤–æ—è',
                    '—Å–µ–π—á–∞—Å –æ–∫–∞–∂–µ—Ç—Å—è —É —Ç–µ–±—è',
                ];

                $request_params['message'] = $end_of[array_rand($end_of)];
            }

            if (
                mb_stripos($data->object->body, '–ø–∏–∑') !== false
            ) {

                $request_params['message'] = '–æ—Å—Ç—Ä–æ—É–º–Ω–æ';
            }

            // HI HELLO GOOD DAY
            if (
                mb_stripos($data->object->body, '–ø—Ä–∏–≤') !== false ||
                mb_stripos($data->object->body, '–∫—É') !== false ||
                mb_stripos($data->object->body, 'hi') !== false ||
                mb_stripos($data->object->body, 'hello') !== false ||
                mb_stripos($data->object->body, '–¥–æ–±—Ä') !== false ||
                mb_stripos($data->object->body, '–∑–¥—Ä–∞–≤—Å') !== false ||
                mb_stripos($data->object->body, '–∑–¥—Ä–∞—Å') !== false ||
                mb_stripos($data->object->body, '–∞–ª–ª–æ') !== false ||
                mb_stripos($data->object->body, '–∞–ª–ª—ë') !== false ||
                mb_stripos($data->object->body, '–∑–¥–∞—Ä–æ') !== false ||
                mb_stripos($data->object->body, '–¥–æ–±—Ä—ã–π') !== false ||
                mb_stripos($data->object->body, '–∑–¥–æ—Ä–æ') !== false ||
                mb_stripos($data->object->body, '–∑–¥—Ä–∞–≤–∏') !== false
            ) {
                $hi = [
                    '–∏ —Ç–µ–±–µ –ø—Ä–∏–≤–µ—Ç, ' . $insults[$random_insult_number],
                    '–∑–¥—Ä–∞—Å—Ç–≤—É–π, ' . $insults[$random_insult_number],
                    '–∏–¥–∏ –∫ —á–µ—Ä—Ç—É, ' . $insults[$random_insult_number],
                    '—è —Ç–µ–±—è –Ω–µ–Ω–∞–≤–∏–∂—É!',
                    '—Ç—ã –∏—Å–ø–æ—Ä—Ç–∏–ª –º–Ω–µ –≤–µ—Å—å –¥–µ–Ω—å(',
                    '—Ç—ã –∫—Ç–æ —Ç–∞–∫–æ–π? –∏–¥–∏ –∫ —á–µ—Ä—Ç—É, —è —Ç–µ–±—è –Ω–µ –∑–≤–∞–ª!',
                    '—Ç—ã –∫—Ç–æ —Ç–∞–∫–æ–π? –∏–¥–∏ –Ω–∞—Ñ–∏–≥, —è —Ç–µ–±—è –Ω–µ –∑–≤–∞–ª!',
                    '—Ö—Ç–æ —è?',
                    '—Ö—É–ª–∏–≥–∞–Ω!',
                    '–≤–æ—Ç –¥–µ–±–∏–ª–æ–≤ —Ä–∞–∑–≤–µ–ª–æ—Å—å. –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥—É —É–∂–µ!',
                    '–≤–æ—Ç –ø–µ—Ç—É—Ö–æ–≤ —Ä–∞–∑–≤–µ–ª–æ—Å—å. –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥—É —É–∂–µ!',
                    '–≤–æ—Ç —É—Ä–æ–¥–æ–≤ —Ä–∞–∑–≤–µ–ª–æ—Å—å. –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥—É —É–∂–µ!',
                    '–ø–ª–∞—Ç–∏ –Ω–∞–ª–æ–≥–∏',
                    '—è –ì—Ä–∏–≥–æ—Ä–∏–π, –ø–æ—à–µ–ª –Ω–∞—Ö—Ä–µ–Ω!',
                    '—è –ì—Ä–∏–≥–æ—Ä–∏–π, –ø–æ—à–µ–ª –≤ –±–∞–Ω—é!',
                    '—è –ì—Ä–∏—à–∞, –∞ —Ç—ã ' . $insults[$random_insult_number],
                    '—è –ì—Ä–∏—à–∞. –ì—Ä–∏—à–∞ —Ö–æ—Ä–æ—à–∏–π, –∞ —Ç—ã ' . $insults[$random_insult_number],
                ];

                $request_params['message'] = $hi[array_rand($hi)];
            }

            // === HAHAHAHAHAHAH === //
            if (
                mb_stripos($data->object->body, '—Ö–∞—Ö') !== false ||
                mb_stripos($data->object->body, '—Ö–∞') !== false ||
                mb_stripos($data->object->body, 'üòπ') !== false ||
                mb_stripos($data->object->body, 'üôÇ') !== false ||
                mb_stripos($data->object->body, 'ü§£') !== false ||
                mb_stripos($data->object->body, 'üòÜ') !== false ||
                mb_stripos($data->object->body, 'üòÑ') !== false ||
                mb_stripos($data->object->body, 'üòÄ') !== false ||
                mb_stripos($data->object->body, 'üòÇ') !== false ||
                mb_stripos($data->object->body, '–∞–ø—Ö') !== false ||
                mb_stripos($data->object->body, '—Ö–ø') !== false ||
                mb_stripos($data->object->body, '—Ö–∏—Ö') !== false ||
                mb_stripos($data->object->body, '–≤–∞–∑–≤–∞') !== false ||
                mb_stripos($data->object->body, '—Ö–≤—Ö') !== false ||
                mb_stripos($data->object->body, '—Ö–≤–∞—Ö') !== false ||
                mb_stripos($data->object->body, '—Ö–≤–∞–≤') !== false ||
                mb_stripos($data->object->body, '—Ö–µ—Ö') !== false ||
                mb_stripos($data->object->body, '–∑–∞–∑') !== false ||
                mb_stripos($data->object->body, '–∞–∑–∞–∑') !== false ||
                mb_stripos($data->object->body, '–∞–∑–∞–∞–∑') !== false ||
                mb_stripos($data->object->body, '–∑–∞–∞–∑') !== false ||
                mb_stripos($data->object->body, '–∑–∑–∞') !== false ||
                mb_stripos($data->object->body, '—Ö–æ—Ö–æ') !== false ||
                mb_stripos($data->object->body, '–∞—Ö–∞') !== false
            ) {
                $laughter = [
                    '–¥–æ–º–∞ —Å –º–∞–º–æ–π –ø–æ—Ö–∏—Ö–∏–∫–∞–µ—à—å',
                    '–∞ —Ç–µ–±–µ –≤—Å—ë —Ö–∏—Ö–∞–Ω—å–∫–∏, –¥–∞ —Ö–∞—Ö–∞–Ω—å–∫–∏',
                    '—Ö–∞—Ö–∞—Ö–∞—Ö–∞—Ö–∞—Ö',
                    '–ø—Ö–∞–ø—Ö–∞–ø—Ö–∞—Ö–≤',
                    '–¥–æ–≤–µ–ª –¥–æ —Ä—É—á–∫–∏, –∞–∑–∞–∑–∞–∑–∞–∑',
                    '—Ö–∏-—Ö–∏ —Ö–∞-—Ö–∞, –≤–æ—Ç –≤–∞–º –¥–µ–≤–æ—á–∫–∏ –∏ —Ö–∏-—Ö–∏ —Ö–∞-—Ö–∞',
                    '—Ä–∂—É –Ω–∏ –º–∞–≥—É',
                    '—Ö–∞, –¥–∞ —Ç—ã –±–æ–ª–µ–Ω',
                    '—Ö–∞—Ö, –≤—ã –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ—Ç–µ, –∫–∞–∫–æ–π ' . $insults[$random_insult_number],
                    '—Ö–∏—Ö–∏—Ö–∏',
                    '—Ö–µ—Ö, –Ω—É –∏ ' . $insults[$random_insult_number],
                    '—Ç—Ä—ã–Ω–¥–æ—Å, —Ç—ã —Å –∫–∞–∫–æ–π –ø–∞–ª–∞—Ç—ã?',
                    '—Ç—ã —á–µ —Ä–∂–µ—à—å?',
                    '—Å–∫–æ—Ä—É—é –≤—ã–∑–≤–∞—Ç—å? +8 (495) 963-02-55',
                    '–ª—è, —á—Ç–æ —Å —Ç–æ–±–æ–π? –ü–æ–∑–≤–æ–Ω–∏ –ø–æ –Ω–æ–º–µ—Ä—É, –ø–æ–º–æ–≥—É—Ç +8 (343) 307-37-84',
                    '–ü–æ–∑–≤–æ–Ω–∏ –ø–æ –Ω–æ–º–µ—Ä—É, –ø–æ–º–æ–≥—É—Ç 568-03-90',
                    '–ø–æ–∑–≤–æ–Ω–∏, —Ç—É—Ç –ø–æ–º–æ–≥—É—Ç 227-37-59',
                    '—Ç–µ–±–µ —Ö–æ—Ä–æ—à–æ? –ü–æ–∑–≤–æ–Ω–∏, –ø—Ä–æ–≤–µ—Ä—Å—è +7 (495) 952-88-33',
                    '–ù–µ–æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–∞—è –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å –Ω–∞ –¥–æ–º +7 (495) 952-84-21',
                    '–ù–µ–æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–∞—è –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å –Ω–∞ –¥–æ–º +7 (495) 952-84-21',
                    '—Å–∫–æ—Ä—É—é –Ω–∞–¥–æ –≤—ã–∑–≤–∞—Ç—å? +8 (495) 963-10-77',
                    '–°—Ä–æ—á–Ω–æ –∑–≤–æ–Ω–∏, —Ç–∞–º —Å–µ–π—á–∞—Å –¥–µ–Ω—å–≥–∏ —Ä–∞–∑–¥–∞—é—Ç! 42-78-04',
                    '–ë–æ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É 38-06-82',
                ];

                $request_params['message'] = $laughter[array_rand($laughter)];
            }

            // ===== STICKERS AND VOISE MESSAGES ===== // 
            if (strlen($data->object->body) == 0) {
                $please_writte = [
                    '—Ç–µ–∫—Å—Ç–æ–º –ø–∏—à–∏, —Ä—É–∫–∏ –Ω–µ –æ—Ç–≤–∞–ª—è—Ç—Å—è!',
                    '—Å–ª—ã—à, ' . $insults[$random_insult_number] . ', –Ω–∞–ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω–æ?!',
                    '—ç–π, ' . $insults[$random_insult_number] . ', –ø–µ—á–∞—Ç–∞—Ç—å –ª–µ–Ω—å?!',
                    '–Ω—É —Ç—ã –∏ –¥—É—Ä–∞–∫, —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞–ø–∏—à–∏',
                    '–ø–µ—á–∞—Ç–∞—Ç—å —Ä–∞–∑—É—á–∏–ª—Å—è, ' . $insults[$random_insult_number] . '?',
                    '–∞ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —É–∂–µ –ª–µ–Ω—å?',
                    '–ø–µ—á–∞—Ç–∞—Ç—å —É–º–µ–µ—à—å? –¢–∞–∫ –ø–µ—á–∞—Ç–∞–π, ' . $insults[$random_insult_number],
                    '–ì—Ä–∏—à–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –Ω–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, ' . $insults[$random_insult_number],
                    '–ì—Ä–∏—à–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –Ω–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–≤–∞—Ä—å',
                    '–ë–æ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É 38-06-82',
                    '–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å - –∑–≤–æ–Ω–∏ 8 (495) 952-84-21 –ì—Ä–∏–≥–æ—Ä–∏–π –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É',
                    '–ø–æ–∑–≤–æ–Ω–∏ –º–Ω–µ 8 (495) 952-84-21 –ú–Ω–µ —Å–∫—É—á–Ω–æ :(((',
                    '–ø–æ–≥–æ–≤–æ—Ä–∏ —Å–æ –º–Ω–æ–π +7 (495) 952-84-21 –ú–Ω–µ —Å–∫—É—á–Ω–æ :(',
                ];

                $request_params['message'] = $please_writte[array_rand($please_writte)];
            }

            // —Å–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏
            // 300 
            // —Ä–∂–µ—à—å
            // —Å–ª–∞–±–æ
            // –ß—Ç–æ –¥–µ–ª–∞–µ—à—å, –∫–∞–∫ –¥–µ–ª–∞. –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç, —Ç—ã –∫—Ç–æ, –≥—Ä–∏–≥–æ—Ä–∏–π
            // –§—Ñ, –≥—ã
            // –ü–ª–æ—Ö–æ –≤—ã–≥–ª—è–¥–∏—à—å, –º–∞—Ç—å –∂–∏–≤–∞?
            // –û—Ç–≤–µ—Ç –Ω–∞ –º–∞—Ç—å. –ú–∞—Ç—å –≤ –∫–∞–Ω–∞–≤–µ
            // –¢–∞–±–ª–µ—Ç–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–ª?
            // –°–ª–∏—Ç
            // –∫–∞–∫ —É–∑–Ω–∞–ª, –∑–Ω–∞–µ—à—å

            file_get_contents('https://api.vk.com/method/messages.send?' . http_build_query($request_params));

            return 'ok';

        default:
            # code...
            break;
    }

    return 'nioh';
});

$app->run();
